#!/bin/bash
set -eu

[ -d $PWD/anaconda ] || mkdir anaconda

docker run -d \
  -p 8888:8888 \
  --name jupyter-notebook \
  -v $PWD/anaconda:/var/lib/notebooks continuumio/anaconda3 \
  /bin/bash -c "jupyter notebook --notebook-dir=/var/lib/notebooks --ip='*' --no-browser --allow-root"
until docker logs jupyter-notebook 2>&1 | grep -A1 'to login with a token:'; do sleep 1; done
