" vim: set filetype=vim :
" using plugin list {{{
" bookmarktoolvar-hint.js
" migemo_find.js
" migemo_hint.js
" forcefocuscontent.js
" lookupDictionary.js
" }}}

let mapleader=","

set focuscontent
set showstatuslinks=2
set defsearch=google
set titlestring=Firefox

nnoremap <Leader>r :source ~/.vimperatorrc<CR>:echomsg "Reload vimperatorrc"<CR>

" Open dictionary with command-line-buffer (depends on lookupDictionary.js)
nnoremap <Leader>a Y:eijiro <M-v><CR>
vnoremap <Leader>a Y:eijiro <M-v><CR>

nnoremap <Leader>ta :set gui=invaddons<CR>:echomsg "Toggle addons"<CR>
nnoremap <Leader>tt :set gui=invtabs<CR>:echomsg "Toggle tabs"<CR>
nnoremap <Leader>tn :set gui=invnavigation<CR>:echomsg "Toggle navigation"<CR>
nnoremap <Leader>tb :set gui=invbookmarks<CR>:echomsg "Toggle bookmarks"<CR>
nnoremap <Leader>tm :set gui=invmenu<CR>:echomsg "Toggle menu"<CR>

noremap <M-f> /
cnoremap <M-f> <C-u>\
inoremap <M-f> <ESC>/

nnoremap d :tabclose -select lastactive<CR>

nnoremap j 3j
nnoremap k 3k

nnoremap h gT
nnoremap l gt

nnoremap H h
nnoremap L l

" Swap opening links behavior by hint
nnoremap f F
nnoremap F f

nnoremap ^ +

nnoremap ya :js util.copyToClipboard('<a href="'+buffer.URL + '">'+ buffer.title + '</a>')<CR>
nnoremap ym :js util.copyToClipboard('['+ buffer.title +']('+ buffer.URL +')')<CR>
nnoremap yt :js util.copyToClipboard(buffer.title)<CR>
nnoremap yu :js util.copyToClipboard(buffer.URL)<CR>
nnoremap ys :js util.copyToClipboard(buffer.title +' - '+ buffer.URL)<CR>

:style -name commandline-ime chrome://* #liberator-commandline-command input {ime-mode: inactive;}

highlight StatusLine color: black; background: transparent; font-weight: normal;

" Make Vimperator's "Y"ank behave like Edit-Copy
" http://phaseportrait.blogspot.jp/2008/12/make-vimperators-yank-behave-like-edit.html
js <<EOF
mappings.addUserMap([modes.NORMAL, modes.VISUAL], ["Y"],
    "Yank the currently selected text",
    function () {
        buffer.getCurrentWord();
        events.feedkeys("<C-v>" +
          (/^Mac/.test(navigator.platform) ?
            "<M-c>"
            : "<C-c>"), true);
        setTimeout( function () {
          liberator.echo("Yanked "
                         + util.readFromClipboard(),
                         commandline.FORCE_SINGLELINE);
        }, 20 );
    });
EOF

